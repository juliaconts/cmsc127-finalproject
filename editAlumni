<?php
include 'DBConnector.php';
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $alumniID = $_POST['alumniID'];

        $sql = "SELECT a.alumniID, a.studentID, m.firstName, m.middleName, m.lastName, m.upMail, m.university, m.degreeProgram, m.homeAddress, m.birthday, m.signature, m.idPicture
            FROM alumni a
            INNER JOIN member m ON a.studentID = m.studentID
            WHERE a.alumniID = '$alumniID'
            LIMIT 1";
    $result = $conn->query($sql);


    if ($result->num_rows == 1) {
        $row = $result->fetch_assoc();
?>
        <!DOCTYPE html>
        <html>
        <head>
            <title>Edit Member</title>
            <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
             <style>
                 body {
                     font-family: "Chakra Petch", sans-serif;
                     background-repeat: no-repeat;
                     background-size: cover;
                     background-color: #000C1E;
                 }

                 form {
                     width: 40%;
                     margin-top: 3%;
                     margin-bottom: 3%;
                     margin-left: auto;
                     margin-right: auto;
                     padding: 20px;
                     background-color: #fff;
                     border-radius: 10px;
                     border: 10px solid #0049AD;
                     box-shadow: 0 4px 8px rgb(3, 4, 60);
                 }

                 label {
                     display: block;
                     margin-top: 10px;
                     color:rgb(2, 16, 36);
                 }

                 input[type="text"],
                 input[type="number"],
                 input[type="date"] {
                     width: 100%;
                     padding: 8px 10px;
                     margin-top: 5px;
                     border: 1px solid #ddd;
                     border-radius: 5px;
                     box-sizing: border-box;
                 }

                 select {
                     padding: 10px;
                     border: 1px solid #ccc;
                     border-radius: 5px;
                     font-size: 16px;
                 }

                 .expand{
                     width: 100%;
                     box-sizing: border-box;
                     
                 }

                 button[type="submit"] {
                     background-color: #001E47; 
                     color: white;
                     padding: 10px 20px;
                     margin-top: 20px;
                     border: none;
                     border-radius: 5px;
                     cursor: pointer;
                     width: 100%;
                 }

                 button[type="submit"]:hover {
                     background-color: #0049AD;
                 }
             </style>
        </head>
        <body>
            <form action="updateAlumni.php" method="post">
                <h2>Edit Alumni</h2>
                <input type="hidden" name="alumniID" value="<?php echo $row['alumniID']; ?>">
                <input type="hidden" name="studentID" value="<?php echo $row['studentID']; ?>">
                <label for="firstName">First Name:</label>
                <input type="text" name="firstName" value="<?php echo htmlspecialchars($row['firstName']); ?>" required><br>
                <label for="middleName">Middle Name:</label>
                <input type="text" name="middleName" value="<?php echo htmlspecialchars($row['middleName']); ?>"><br>
                <label for="lastName">Last Name:</label>
                <input type="text" name="lastName" value="<?php echo htmlspecialchars($row['lastName']); ?>" required><br>
                <label for="upMail">UP Mail:</label>
                <input type="text" name="upMail" value="<?php echo htmlspecialchars($row['upMail']); ?>"><br>
                <label for="university">University:</label>
                <input type="text" name="university" value="<?php echo htmlspecialchars($row['university']); ?>"><br>
                <label for="degreeProgram">Degree Program:</label>
                <input type="text" name="degreeProgram" value="<?php echo htmlspecialchars($row['degreeProgram']); ?>"><br>
                <label for="homeAddress">Home Address:</label>
                <input type="text" name="homeAddress" value="<?php echo htmlspecialchars($row['homeAddress']); ?>"><br>
                <label for="birthday">Birthday:</label>
                <input type="date" name="birthday" value="<?php echo htmlspecialchars($row['birthday']); ?>"><br>
                <label for="signature">Signature (URL):</label>
                <input type="text" name="signature" value="<?php echo htmlspecialchars($row['signature']); ?>"><br>
                <label for="idPicture">ID Picture (URL):</label>
                <input type="text" name="idPicture" value="<?php echo htmlspecialchars($row['idPicture']); ?>"><br>
                <button type="submit">Update Alumni</button>
            </form>
        </body>
        </html>
<?php
    }
else {
    echo "Member not found.";}
}
else {
    echo "Invalid request. Please use the form to edit a member.";}

$conn->close();
?>